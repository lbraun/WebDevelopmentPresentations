<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Angular Leaflet directive</title>

    <meta name="description" content="Topic 1">
    <meta name="author" content="Oscar Belmonte Fernandez">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="../reveal-js/css/reveal.css">
    <link rel="stylesheet" href="../reveal-js/css/theme/simple.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="../reveal-highlight-themes/styles/default.css">

    <!--<link rel="stylesheet" href="../reveal/lib/css/zenburn.css">-->
    <link rel="stylesheet" href="../reveal-js/lib/css/zenburn.css">

    <!-- Mis ajustes de css -->
    <link rel="stylesheet" href="../css/my.css">


    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match( /print-pdf/gi ) ? '../reveal-js/css/print/pdf.css' : '../reveal-js/css/print/paper.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!--[if lt IE 9]>
    <script src="../reveal-js/lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

<div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">
        <section class="center">
            <h1>Web Development</h1>
            <h2>Client Side</h2>
            <h3>angular-leaflet-directive</h3>
            <h4>Óscar Belmonte Fernández</h4>
            <h4>Universitat Jaume I</h4>
        </section>

        <section>
            <h3>Introduction</h3>
            <section>
                <p>You already know how to use maps in a web page using leaflet(Computer Graphics and Visualization).</p>
                <p>You now know how to design the layout of your application using Angular. The next step is to know how to connect these two worlds.</p>
                <p>The answer is by means of <strong>angular-leaflet-directive</strong>.</p>
            </section>
        </section>

        <section>
            <h3>Content</h3>
            <section>
                <ol>
                    <li><a href="#/what_are_directives">What are AngularJS directives?</a></li>
                    <li><a href="#/first_example">First example</a></li>
                    <li><a href="#/geotodo">The GeoTODO project</a></li>
                    <li><a href="#/summary">Summary</a>.</li>
                </ol>
            </section>
        </section>

        <section id="what_are_directives">
            <h3>What are AngularJS directives?</h3>
            <section>
                <p>Taken form the <strong>Angular</strong> web page:</p>
                <blockquote>
                    At a high level, directives are markers on a DOM element (such as an attribute, element name, comment or CSS class) that tell AngularJS's HTML compiler ($compile) to attach a specified behavior to that DOM element (e.g. via event listeners), or even to transform the DOM element and its children.
                </blockquote>
            </section>

        </section>

        <section id="first_example">
            <h3>First example</h3>
            <section>
                <p>From a practical point of view, we can you angular-leaflet-directives to interact with <strong>Leaflet</strong> maps using <strong>AngularJS</strong>.</p>
                <p>Let's crate our first example.</p>
                <ol>
                    <li>Create a new bower project.</li>
                    <li>Install the following modules:</li>
                    <ol>
                        <li>bootstrap.</li>
                        <li>angular.</li>
                        <li>leaflet.</li>
                        <li>angular-leaflet-directive</li>
                    </ol>
                </ol>
                <p>Remember, just type the following to install a module in your project:</p>
                <pre><code lang="console" data-trim>
bower install --save bootstrap
                </code></pre>
            </section>

            <section>
                <p>Let's create the <strong>index.html</strong> file and type in:</p>
                <pre><code lang="javascript" data-trim>
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot; ng-app=&quot;app&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;link href=&quot;./bower_components/bootstrap/dist/css/bootstrap.css&quot; rel=&quot;stylesheet&quot;&gt;
    &lt;link href=&quot;./bower_components/leaflet/dist/leaflet.css&quot; rel=&quot;stylesheet&quot;&gt;
    &lt;script src=&quot;./bower_components/jquery/dist/jquery.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;./bower_components/bootstrap/dist/js/bootstrap.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;./bower_components/angular/angular.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;./bower_components/leaflet/dist/leaflet.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;./bower_components/angular-leaflet-directive/dist/angular-leaflet-directive.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;./js/myScripts.js&quot;&gt;&lt;/script&gt;
    &lt;title&gt;My first AngularJS and Leaflet map&lt;/title&gt;
&lt;/head&gt;
&lt;body ng-controller=&quot;TheController&quot;&gt;
    &lt;div class=&quot;container&quot;&gt;
        &lt;h1&gt;My first Angular and Leaftlet map&lt;/h1&gt;
        &lt;leaflet height=&quot;480px&quot; width=&quot;100%&quot;&gt;&lt;/leaflet&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
                </code></pre>
            </section>

            <section>
                <p>Now, let's create the <strong>Angular</strong> controller, so create a new <strong>javascript</strong> file <strong>myScripts.js</strong> in folder named <strong>js</strong>:</p>
                <pre><code lang="javascript" data-trim>
var app = angular.module("app", ["leaflet-directive"]);

app.controller("TheController", ["$scope", function($scope) {

}]);
                </code></pre>
                <p>That's all! start your application within <strong>WebStorm</strong> and you will see the result.</p>
            </section>

            <section>
                <p>This is the result, a fully functional leaflet map:</p>
                <p class="center"><img src="img/leafletWorldMap.png" style="width: 1000px"></p>
            </section>

            <section>
                <p>If you want to render a map centered at some point, change the following line in the html file :</p>
                <pre><code lang="html" data-trim>
                    &lt;leaflet lf-center=&quot;castellon&quot; height=&quot;480px&quot; width=&quot;100%&quot;&gt;&lt;/leaflet&gt;
                </code></pre>
                <p>And write this code inside the <strong>controller</strong> function:</p>
                <pre><code lang="javascript" data-trim>
app.controller("TheController", ["$scope", function($scope) {
    angular.extend($scope, {
        castellon: {
            lat: 39.98685368305097,
            lng: -0.04566192626953125,
            zoom: 14
        }
    })
}]);
                </code></pre>
            </section>

            <section>
                <p>This is the result, a map centered in Castellon city:</p>
                <p class="center"><img src="img/leafletCastellon.png" style="width: 1000px;"></p>
            </section>
        </section>


        <section id="geotodo">
            <h3>The GeoTODO project</h3>
            <section>
                <p>Let's sum app all technologies we have seen to build a something fancy.</p>
                <p>First, let's see how to add a marker to our map. Add a new attribute <strong>makers</strong> to the <strong>leaflet</strong> element.</p>
                <pre><code lang="html" data-trim>
&lt;leaflet lf-center=&quot;castellon&quot; markers=&quot;markers&quot; height=&quot;480px&quot; width=&quot;100%&quot;&gt;&lt;/leaflet&gt;
                </code></pre>
                <p>This attribute will contain the markers in our map.</p>
            </section>

            <section>
                <p>Now, lets add this code to our javascript file</p>
                <pre><code lang="javascript" data-trim>
$scope.markers = new Array();

$scope.$on("leafletDirectiveMap.click", function (event,args) {
    var latlng = args.leafletEvent.latlng;

    $scope.markers = [{
        lat: latlng.lat,
        lng: latlng.lng,
        message: "Hello"
    }]
});
                </code></pre>
                <ol>
                    <li>We are listening to <strong>leafletDirectiveMap.click</strong> events.</li>
                    <li>We define a <strong>function</strong> as listener.</li>
                    <li>This function receives to parameters, the event and information about the event.</li>
                    <li>For this event the information is the coordinates (lat, lng).</li>
                </ol>
            </section>

            <section>
                <p>This is the result:</p>
                <p class="center"><img src="img/leafletMark.png" style="width: 1000px"></p>
            </section>

            <section>
                <p>Let's extend our application to maintain multiple markers. Chage the javascript code to:</p>
                <pre><code lang="javascript" data-trim>
$scope.$on("leafletDirectiveMap.click", function (event,args) {
    var latlng = args.leafletEvent.latlng;

    $scope.markers.push({
        lat: latlng.lat,
        lng: latlng.lng,
        message: "Hello"
    });
});
                </code></pre>
                <p>Now, we are pushing any new marker into the array.</p>
            </section>

            <section>
                <p>This is the result:</p>
                <p class="center"><img src="img/leafletMarkers.png" style="width: 1000px"></p>
            </section>

            <section>
                <p>If you need more control about the mouse button pressed:</p>
                <pre><code lang="javascript" data-trim>
$scope.$on("leafletDirectiveMap.mousedown", function (event,args) {
    var mouseButton = args.leafletEvent.originalEvent.button;

    if(mouseButton == 2) { // Right button
        var latlng = args.leafletEvent.latlng;

        $scope.markers.push({
            lat: latlng.lat,
            lng: latlng.lng,
            message: "Hello"
        });
    }
});
                </code></pre>
                <p>Now, left button performs the usual actions, and we use the right button to add a new marker to the map.</p>
            </section>


        </section>


        <section id="summary">
            <h3>Summary</h3>
            <section>
                <p>In this chapter you have seen how to use <strong>Leaflet</strong> using <strong>AngullarJS</strong> by means for <strong>angular-leaflet-directive</strong>.</p>
                <p>Now, you can <em>control</em> your maps and its content using <strong>AngularJS</strong>.</p>
            </section>
        </section>

    </div> <!-- slides -->

</div> <!-- reveal -->

<!--<script src="../reveal/lib/js/head.min.js"></script>-->
<!--<script src="../reveal/js/reveal.js"></script>-->
<script src="../reveal-js/lib/js/head.min.js"></script>
<script src="../reveal-js/js/reveal.js"></script>

<script>

    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: false,
        width: 1366,
        hight: 768,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
            { src: '../reveal-js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
            { src: '../reveal-js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: '../reveal-js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: '../reveal-js/plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
            { src: '../reveal-js/plugin/zoom-js/zoom.js', async: true },
            { src: '../reveal-js/plugin/notes/notes.js', async: true }
        ]
    });

</script>

</body>
</html>
